spring:
  application:
    name: kraft

  profiles:
    # 활성 프로파일 설정
    # 환경변수 SPRING_PROFILES_ACTIVE로 덮어쓸 수 있습니다
    # 개발: dev (기본)
    # 운영: prod
    # OAuth 사용: oauth 프로파일 추가 (예: dev,oauth 또는 prod,oauth)
    active: ${SPRING_PROFILES_ACTIVE:dev}

  jpa:
    show-sql: true
    open-in-view: false  # OSIV 비활성화 (성능 최적화, N+1 문제 방지)

  # Flyway 데이터베이스 마이그레이션
  flyway:
    baseline-on-migrate: ${SPRING_FLYWAY_BASELINE_ON_MIGRATE:true}
    locations: classpath:db/migration
    enabled: true

  # Spring Session 기본 설정 (모든 환경에서 Redis 사용)
  session:
    store-type: redis
    timeout: 1800s  # 세션 타임아웃: 30분 (프로파일별 오버라이드 가능)

server:
  port: ${SERVER_PORT:8080}
  forward-headers-strategy: native  # 프록시 헤더 처리 (X-Forwarded-* 지원)


# 로깅 설정 (logback-spring.xml에서 상세 설정)
logging:
  config: classpath:logback-spring.xml

